= content_for :js_for_head do
  :javascript
    Ciclavia.PageData = {
      events: #{SuperEvent.order("created_at ASC").all.to_json },
      midpoint: #{[Place.last.lat, Place.last.lng]},
      layers: #{Layer.all.to_json},
      routes: #{Route.all.to_json}
    }

#map
.map-ciclavialogo
.mapnav-container
  .mapnav-title Guide to CicLAvia

  .mapnav-event.nextup{:data => { :id => SuperEvent.default.id }}
    = render partial: 'navevent', locals: { event: SuperEvent.default }


  .mapnav-previousevents
    .mapnav-sectionlabel Previous events

    - SuperEvent.where.not(id: SuperEvent.default.id).order("created_at DESC").limit(1).each_with_index do |event, index|
      .mapnav-event{:data => { :id => event.id }}
        = render partial: 'navevent', locals: { event: event }
